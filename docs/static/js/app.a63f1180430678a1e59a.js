webpackJsonp([1],{129:function(e,t,n){function i(e){n(178)}var s=n(286)(n(132),n(287),i,null,null);e.exports=s.exports},132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),s=n.n(i),a=n(139),o=n.n(a),r=n(142),d=n.n(r),l=n(133),h=n(127),u=n.n(h);t.default={name:"app",data:function(){return{gameIsRunning:!1,message:"Glitchping by Mund",options:{paddles:[{loading:"waiting..."}]},paddles:[],gameMode:"default",render:"",paused:!1}},watch:{gameIsRunning:function(e){var t=this;if(e)this.render=new l.a(this.getOptions(),function(){t.gameIsRunning=!1},function(){t.paused=!0}),this.render.start();else{var n=this.render.game;0===n.winner.length?this.message="Glitchping by Mund":n.winner.length>1?this.message=n.winner[0]+" and others won!🎉":this.message=n.winner[0]+" won!🎉"}return e},gameMode:function(e){this.getOptionsFromURL("./static/options/"+e+".json")},options:function(e){this.paddles=this.setPaddleOptions(e.paddles)},paused:function(e){e||this.render.unpause()}},methods:{startGame:function(){this.gameIsRunning=!0,this.paused=!1,u.a.enabled&&u.a.request(),document.body.requestPointerLock()},addPlayer:function(){var e=d()({},this.paddles[0]);e.name=o()(" Player "+(this.paddles.length+1)),this.paddles.push(e)},getOptionsFromURL:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.fetch)(e).then(function(e){return e.json()}).then(function(e){t.options=e}).catch(function(e){console.log(e)})},getOptions:function(){return{paddles:this.getPaddleOptions()}},getPaddleOptions:function(){return this.computePaddleOptions(this.paddles,JSON.parse)},setPaddleOptions:function(e){return this.computePaddleOptions(e,o.a)},computePaddleOptions:function(e,t){var n=[],i=e.map(function(e){return d()({},e)}),a=!0,o=!1,r=void 0;try{for(var l,h=s()(i);!(a=(l=h.next()).done);a=!0){var u=l.value;for(var c in u)u.hasOwnProperty(c)&&(u[c]=t(u[c]));n.push(u)}}catch(e){o=!0,r=e}finally{try{!a&&h.return&&h.return()}finally{if(o)throw r}}return n}},created:function(){this.getOptionsFromURL("./static/options/default.json")}}},133:function(e,t,n){"use strict";var i=n(143),s=n.n(i),a=n(59),o=n.n(a),r=n(57),d=n.n(r),l=n(58),h=n.n(l),u=n(252),c=(n.n(u),n(179)),p=n.n(c),v=n(134),g=n(127),m=n.n(g),f=n(135),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};for(d()(this,e),this.game=new p.a(t),this.stop=i,this.pauseAction=s,this.reRender=!1,this.bots=t.paddles.map(function(e){return!!e.bot&&n.i(v.a)()}),this.multiplier=this.findSaveMultiplier.apply(this,o()(this.game.fieldSize).concat([window.innerWidth,window.innerHeight])),this.renderer=new u.autoDetectRenderer({width:window.innerWidth,height:window.innerHeight,backgroundColor:3355443}),this.keys=[],this.actions=["up","down"],this.controller=new f.a(this.game,this.actions,this.bots),this.touchAreas=new u.Container,this.touchAreas.interactive=!0,this.addTouchAreas(),this.target=document.getElementById("canvas");this.target.firstChild;)this.target.removeChild(this.target.firstChild);this.resize=this.resize.bind(this),this.activateKey=this.activateKey.bind(this),this.deactivateKey=this.deactivateKey.bind(this),this.addEventListeners()}return h()(e,[{key:"addEventListeners",value:function(){window.addEventListener("resize",this.resize),window.addEventListener("keyup",this.deactivateKey,{passive:!0}),window.addEventListener("keydown",this.activateKey,{passive:!0}),window.addEventListener("contextmenu",this.blockContext)}},{key:"removeEventListeners",value:function(){window.removeEventListener("resize",this.resize),window.removeEventListener("keyup",this.deactivateKey,{passive:!0}),window.removeEventListener("keydown",this.activateKey,{passive:!0}),window.removeEventListener("contextmenu",this.blockContext),m.a.off("change",this.pause.bind(this))}},{key:"resize",value:function(){this.multiplier=this.findSaveMultiplier.apply(this,o()(this.game.fieldSize).concat([window.innerWidth,window.innerHeight])),this.addTouchAreas(),this.firstRender(),this.renderer.resize(window.innerWidth,window.innerHeight)}},{key:"activateKey",value:function(e){this.controller.activateKey(e.keyCode)}},{key:"deactivateKey",value:function(e){this.controller.deactivateKey(e.keyCode)}},{key:"blockContext",value:function(e){e.preventDefault()}},{key:"addTouchAreas",value:function(){var e=this;this.touchAreas.removeChildren();for(var t=0;t<this.game.paddles.length;t++)for(var n=0;n<this.actions.length;n++)!function(n){var i=new u.Graphics,a=e.mp(e.game.fieldSize[0]/2,e.game.fieldSize[1]/2);i.hitArea=new u.Rectangle(t*a[0],n*a[1],t*a[0]+a[0],n*a[1]+a[1]),i.interactive=!0,e.touchAreas.addChild(i);var o=window.innerWidth>window.innerHeight?[t,n]:[n,t],r=s()(o,2),d=r[0],l=r[1];i.on("touchstart",function(){e.controller.addControl(d,l)}),i.on("touchend",function(){e.controller.removeControl(d,l)}),i.on("touchendoutside",function(){e.controller.removeControl(d,l)})}(n)}},{key:"findSaveMultiplier",value:function(e,t,n,i){return window.innerWidth>window.innerHeight?{x:n/e,y:i/t}:{x:i/e,y:n/t}}},{key:"mp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.multiplier;return window.innerWidth>window.innerHeight?[e*n.x,t*n.y]:[t*n.y,e*n.x]}},{key:"firstRender",value:function(){this.reRender&&(this.paddles.destroy(),this.ball.destroy(),this.textContainer.destroy(),this.stage.destroy()),this.reRender=!0,this.paddles=new u.Container,this.ball=new u.Graphics,this.textContainer=new u.Container,this.stage=new u.Container,this.renderer.render(this.stage);for(var e=0;e<this.game.paddles.length;e++){var t=this.game.paddles[e],n=new u.Text("",{fontFamily:"sarpanch",fontSize:10*this.multiplier.x,fill:16777215,stroke:16711680}),i=this.mp(t.pos[0],t.pos[1]+100);n.x=i[0],n.y=i[1],this.textContainer.addChild(n);var s=new u.Graphics;s.lineStyle(this.multiplier.x,16711680),s.beginFill(16777215),s.drawRect.apply(s,[0,0].concat(o()(this.mp.apply(this,o()(t.size)))));var a=this.mp.apply(this,o()(t.pos));s.x=a[0],s.y=a[1],s.endFill(),this.paddles.addChild(s)}var r=this.mp.apply(this,o()(this.game.ball.pos));this.ball.lineStyle(this.multiplier.x,16711680),this.ball.beginFill(16777215),this.ball.drawCircle(0,0,this.game.ball.size/2*this.multiplier.x),this.ball.x=r[0],this.ball.y=r[1],this.ball.endFill(),this.stage.addChild(this.ball),this.stage.addChild(this.paddles),this.stage.addChild(this.textContainer),this.stage.addChild(this.touchAreas)}},{key:"start",value:function(){var e=this;m.a.on("change",this.pause.bind(this)),this.target.appendChild(this.renderer.view),this.firstRender();!function t(){if(e.game.ended)e.removeEventListeners(),m.a.exit(),e.stage.destroy(),e.stop();else{e.game.update(e.controller.getController());for(var n=0;n<e.game.paddles.length;n++){var i=e.game.paddles[n],s=e.textContainer.getChildAt(n),a=e.mp(i.pos[0],i.pos[1]+100);s.text=i.points||"",s.x=a[0],s.y=a[1];var r=e.paddles.getChildAt(n),d=e.mp.apply(e,o()(i.pos));r.x=d[0],r.y=d[1]}var l=e.mp.apply(e,o()(e.game.ball.pos));e.ball.x=l[0],e.ball.y=l[1],window.requestAnimationFrame(t),e.renderer.render(e.stage)}}()}},{key:"unpause",value:function(){this.game.paused=!1}},{key:"pause",value:function(){m.a.isFullscreen||this.game.ended||(this.game.paused=!0,this.pauseAction())}}]),e}();t.a=w},134:function(e,t,n){"use strict";function i(){var e="";return function(t,n){if(t.paddles[n].controlsBall)return""!==e&&t.ball.pos[1]>10?t.ball.pos[1]<t.fieldSize[1]-10?e:"up"===e?"down":"up":e=Math.random()>.5?"down":"up";e="";var i=t.ball.pos[1],a=t.paddles[n].pos[1]+t.paddles[n].size[1]/2,o=i-a;return o<0?s(i,a,t.fieldSize[1])<-1*o&&t.paddles[1].controlsBall?"down":"up":s(a,i,t.fieldSize[1])<o&&t.paddles[1].controlsBall?"up":"down"}}function s(e,t,n){return e+(n-t)}t.a=i},135:function(e,t,n){"use strict";var i=n(59),s=n.n(i),a=n(31),o=n.n(a),r=n(57),d=n.n(r),l=n(58),h=n.n(l),u=function(){function e(t,n,i){d()(this,e),this.game=t,this.actions=n,this.bots=i,this.states=new Uint8Array(this.game.paddles.length*this.actions.length),this.controller=null}return h()(e,[{key:"addControl",value:function(e,t){this.bots[e]||(this.states[e*this.actions.length+t]=!0,this.controller=null)}},{key:"removeControl",value:function(e,t){this.states[e*this.actions.length+t]=!1,this.controller=null}},{key:"activateKey",value:function(e){var t=this.lookup(e),n=!0,i=!1,s=void 0;try{for(var a,r=o()(t);!(n=(a=r.next()).done);n=!0){var d=a.value,l=d.paddleId,h=d.actionId;this.addControl(l,h)}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}}},{key:"deactivateKey",value:function(e){var t=this.lookup(e),n=!0,i=!1,s=void 0;try{for(var a,r=o()(t);!(n=(a=r.next()).done);n=!0){var d=a.value,l=d.paddleId,h=d.actionId;this.removeControl(l,h)}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}}},{key:"lookup",value:function(e){for(var t=[],n=0;n<this.game.paddles.length;n++){var i=!0,s=!1,a=void 0;try{for(var r,d=o()(this.game.paddles[n].controls);!(i=(r=d.next()).done);i=!0){var l=r.value;l.key==e&&t.push({paddleId:n,actionId:this.actions.indexOf(l.action)})}}catch(e){s=!0,a=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw a}}}return t}},{key:"getController",value:function(){if(!this.controller){this.controller=[];for(var e=0;e<this.states.length;e++)this.states[e]&&this.controller.push({paddle:this.game.paddles[parseInt(e/this.actions.length)],action:this.actions[e%this.actions.length]})}for(var t=[].concat(s()(this.controller)),n=0;n<this.bots.length;n++)this.bots[n]&&t.push({paddle:this.game.paddles[n],action:this.bots[n](this.game,n)});return t}}]),e}();t.a=u},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(131),s=n(129),a=n.n(s),o=n(130),r=n.n(o);i.a.use(r.a),i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",components:{App:a.a}})},178:function(e,t){},287:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.gameIsRunning,expression:"!gameIsRunning"}],staticClass:"screen",attrs:{id:"startScreen"}},[n("h1",[e._v(e._s(e.message))]),e._v(" "),n("button",{staticClass:"startGame button",on:{click:e.startGame}},[e._v("Play 🕹️")]),e._v(" "),n("button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#settingScreen",expression:"'#settingScreen'"}],staticClass:"button",attrs:{id:"settingButton"}},[e._v("Settings 🔎")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.gameIsRunning,expression:"!gameIsRunning"}],staticClass:"screen",attrs:{id:"settingScreen"}},[n("h1",[e._v("Settings 🔎")]),e._v(" "),n("h2",[e._v("Game Modes 🃏")]),e._v(" "),n("form",{staticClass:"selecter",attrs:{id:"gameModes"}},[n("a",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.gameMode,expression:"gameMode"}],attrs:{id:"twin",type:"radio",name:"gamemode",value:"twin"},domProps:{checked:e._q(e.gameMode,"twin")},on:{change:function(t){e.gameMode="twin"}}}),e._v(" "),n("label",{staticClass:"button",attrs:{for:"twin"}},[e._v("\n          Twin 👯‍\n        ")])]),e._v(" "),n("a",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.gameMode,expression:"gameMode"}],attrs:{type:"radio",id:"default",name:"gamemode",value:"default",checked:""},domProps:{checked:e._q(e.gameMode,"default")},on:{change:function(t){e.gameMode="default"}}}),e._v(" "),n("label",{staticClass:"button",attrs:{for:"default"}},[e._v("\n          Default 😃️\n        ")])])]),e._v(" "),n("h2",[e._v("Advanced Settings 💻")]),e._v(" "),e.paddles[0]?n("div",{staticClass:"wrapper",attrs:{id:"playerSettings"}},[n("table",[n("tr",e._l(e.paddles[0],function(t,i){return n("th",[e._v("\n            "+e._s(i)+"\n          ")])})),e._v(" "),e._l(e.paddles,function(t){return n("tr",e._l(t,function(i,s){return n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t[s],expression:"paddle[key]"}],staticClass:"button",attrs:{type:"text"},domProps:{value:t[s]},on:{input:function(n){n.target.composing||e.$set(t,s,n.target.value)}}})])}))})],2),e._v(" "),n("button",{staticClass:"button",on:{click:e.addPlayer}},[e._v("Add player")])]):e._e()]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.paused,expression:"paused"}],staticClass:"paused"},[n("h1",[e._v("The game is paused!")]),e._v(" "),n("button",{staticClass:"button pauseButton",attrs:{type:"button",name:"button"},on:{click:function(t){e.startGame()}}},[e._v("Unpause")]),e._v(" "),n("button",{staticClass:"button pauseButton",attrs:{type:"button",name:"button"},on:{click:function(t){e.gameIsRunning=!1}}},[e._v("Exit")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.gameIsRunning,expression:"gameIsRunning"}],attrs:{id:"canvas"}})])},staticRenderFns:[]}}},[136]);
//# sourceMappingURL=app.a63f1180430678a1e59a.js.map